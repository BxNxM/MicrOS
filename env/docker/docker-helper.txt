
# [1] Create docker image
docker build --no-cache -t micros-gateway:1.0 .

# [2] List docker image
docker images

# [3] Start container (image id)
docker run --name micros-gateway -p 5000:5000 -e GATEWAYIP="10.0.1.1" -d micros-gateway:1.0

# Get container IP
docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' micros-gateway

# List all containers
docker ps -a

# Start/Stop docker container
docker stop <container_id>
docker start <container_id>

# Interactive "log-in" to container (container id)
docker exec -it micros-gateway /bin/bash

# Remove docker image
docker image rm <image_id>

# List docker network info
docker network ls
docker network inspect bridge

# Prometheus:
GateWay in a container:
    docker run --name prometheus -d -p 9090:9090 -v ./prometheus.yml:/etc/prometheus/prometheus.yml prom/prometheus

Gateway on localhost (hybrid setup):
    docker run --name prometheus -d -p 9090:9090 -p 5000:5000 -v ./prometheus.yml:/etc/prometheus/prometheus.yml prom/prometheus
docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' prometheus

# Docker external service access:
Prometheus: http://10.0.1.61:9090
micrOS gateway for Prometheus: http://10.0.1.61:5000/metrics/TinyDevBoard/esp32+temp


# Docker compose
    # In the background:
        docker-compose up -d
docker-compose up

docker-compose restart prometheus

